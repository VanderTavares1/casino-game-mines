{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: 'http://localhost:8080/usuario'\n});\nconst apiJogo = axios.create({\n  baseURL: 'http://localhost:8080/jogo'\n});\nconst apiEmail = axios.create({\n  baseURL: 'http://localhost:8080/email'\n});\nexport function logout() {\n  localStorage.removeItem('authToken');\n  window.location.href = '/login'; // redireciona para o login\n}\nfunction getAuthToken() {\n  return localStorage.getItem('authToken');\n}\n\n// Interceptor de request para incluir token\nconst attachToken = config => {\n  const token = getAuthToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n};\nconst handleAuthError = error => {\n  if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n    logout(); // remove token e redireciona\n  }\n  return Promise.reject(error);\n};\napi.interceptors.request.use(attachToken, Promise.reject);\napiJogo.interceptors.request.use(attachToken, Promise.reject);\napi.interceptors.response.use(response => response, handleAuthError);\napiJogo.interceptors.response.use(response => response, handleAuthError);\nexport function infomacesToken() {\n  const token = getAuthToken();\n  return JSON.parse(Buffer.from(token.split(\".\")[1], \"base64\").toString());\n}\nexport function buscarTodosUsuários() {\n  return api.get('/buscarTodosUsuarios');\n}\nexport async function fazerLogin(usuario, senha) {\n  const response = await api.post(\"/login\", {\n    usuario,\n    senha\n  });\n  localStorage.setItem('authToken', response.data.token);\n  return response.data;\n}\nexport async function fazendoCadastro(nome, usuario, dataDeNascimento, qntdJogosFeitos, senha, confirmarSenha, quantosGanho, quantosPerdeu, qntdDinheiro, role) {\n  const response = await api.post(\"/addUsuario\", {\n    nome,\n    usuario,\n    dataDeNascimento,\n    qntdJogosFeitos,\n    senha,\n    confirmarSenha,\n    quantosGanho,\n    quantosPerdeu,\n    qntdDinheiro,\n    role\n  });\n  return response.data;\n}\nexport async function requisicaoParaTrocarDeSenha(usuario) {\n  const response = await apiEmail.post(\"/recuperar-senha\", {\n    usuario\n  });\n  return response.data;\n}\nexport async function buscarUsuarioLogado() {\n  const response = await api.get(\"/home\");\n  return response.data;\n}\nexport async function enviandoDadosIniciaisDaAposta(qntdBombas, apostaInicial) {\n  const response = await apiJogo.post(\"/mines/dados\", {\n    qntdBombas,\n    apostaInicial\n  });\n  return response.data;\n}\nexport async function enviandoCaixaEscolhida(caixa_escolhida, idJogo, quantidadeDiamantesEncontrados) {\n  const response = await apiJogo.post(\"/minesJogar\", {\n    caixa_escolhida,\n    idJogo,\n    quantidadeDiamantesEncontrados\n  });\n  return response.data;\n}\nexport async function enviandoDadosAposParar(idJogo) {\n  const response = await apiJogo.post(`/parar/${idJogo}`);\n  return response.data;\n}","map":{"version":3,"names":["axios","api","create","baseURL","apiJogo","apiEmail","logout","localStorage","removeItem","window","location","href","getAuthToken","getItem","attachToken","config","token","headers","Authorization","handleAuthError","error","response","status","Promise","reject","interceptors","request","use","infomacesToken","JSON","parse","Buffer","from","split","toString","buscarTodosUsuários","get","fazerLogin","usuario","senha","post","setItem","data","fazendoCadastro","nome","dataDeNascimento","qntdJogosFeitos","confirmarSenha","quantosGanho","quantosPerdeu","qntdDinheiro","role","requisicaoParaTrocarDeSenha","buscarUsuarioLogado","enviandoDadosIniciaisDaAposta","qntdBombas","apostaInicial","enviandoCaixaEscolhida","caixa_escolhida","idJogo","quantidadeDiamantesEncontrados","enviandoDadosAposParar"],"sources":["/home/youx/Área de Trabalho/teste/casa-de-aposta/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:8080/usuario'\n});\n\nconst apiJogo = axios.create({\n  baseURL: 'http://localhost:8080/jogo'\n});\n\nconst apiEmail = axios.create({\n  baseURL: 'http://localhost:8080/email'\n});\n\nexport function logout() {\n  localStorage.removeItem('authToken');\n  window.location.href = '/login'; // redireciona para o login\n}\n\nfunction getAuthToken() {\n  return localStorage.getItem('authToken');\n}\n\n// Interceptor de request para incluir token\nconst attachToken = config => {\n  const token = getAuthToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n};\n\nconst handleAuthError = error => {\n  if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n    logout(); // remove token e redireciona\n  }\n  return Promise.reject(error);\n};\n\napi.interceptors.request.use(attachToken, Promise.reject);\napiJogo.interceptors.request.use(attachToken, Promise.reject);\napi.interceptors.response.use(response => response, handleAuthError);\napiJogo.interceptors.response.use(response => response, handleAuthError);\n\nexport function infomacesToken() {\n  const token = getAuthToken();\n  return JSON.parse(Buffer.from(token.split(\".\")[1], \"base64\").toString());\n}\n\nexport function buscarTodosUsuários() {\n  return api.get('/buscarTodosUsuarios');\n}\n\nexport async function fazerLogin(usuario, senha) {\n  const response = await api.post(\"/login\", { usuario, senha });\n  localStorage.setItem('authToken', response.data.token);\n  return response.data;\n}\n\nexport async function fazendoCadastro(nome, usuario, dataDeNascimento, qntdJogosFeitos, senha, confirmarSenha, quantosGanho, quantosPerdeu, qntdDinheiro, role) {\n  const response = await api.post(\"/addUsuario\", { nome, usuario, dataDeNascimento, qntdJogosFeitos, senha, confirmarSenha, quantosGanho, quantosPerdeu, qntdDinheiro, role });\n  return response.data;\n}\n\nexport async function requisicaoParaTrocarDeSenha(usuario) {\n  const response = await apiEmail.post(\"/recuperar-senha\", { usuario });\n  return response.data;\n}\n\nexport async function buscarUsuarioLogado() {\n  const response = await api.get(\"/home\");\n  return response.data;\n}\n\nexport async function enviandoDadosIniciaisDaAposta(qntdBombas, apostaInicial) {\n  const response = await apiJogo.post(\"/mines/dados\", { qntdBombas, apostaInicial });\n  return response.data;\n}\n\nexport async function enviandoCaixaEscolhida(caixa_escolhida, idJogo, quantidadeDiamantesEncontrados) {\n  const response = await apiJogo.post(\"/minesJogar\", { caixa_escolhida, idJogo, quantidadeDiamantesEncontrados });\n  return response.data;\n}\n\nexport async function enviandoDadosAposParar(idJogo) {\n  const response = await apiJogo.post(`/parar/${idJogo}`);\n  return response.data;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}